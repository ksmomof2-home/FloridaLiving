<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>ðŸŒ¿ Kellyâ€™s Florida Garden Chronicles 001</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="assets/css/style.css?v=5">
<link rel="icon" href="assets/favicon.ico" type="image/x-icon">
  <style>
    body { font-family: 'Georgia', serif; background: #f8f5e9; color: #3d2b1f; line-height: 1.6; max-width: 1100px; margin: 0 auto; padding: 2rem; }
    h1 { text-align: center; color: #2e7d32; }
    .pot-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(240px, 1fr)); gap: 1.5rem; margin: 3rem 0; }
    .pot-card { background: #fff; border-radius: 16px; padding: 1rem; box-shadow: 0 6px 15px rgba(0,0,0,0.1); text-align: center; transition: transform 0.2s; }
    .pot-card:hover { transform: translateY(-5px); }
    .pot-card a { text-decoration: none; color: inherit; display: block; }
    .pot-name { font-size: 1.3rem; margin: 0.5rem 0; color: #1b5e20; }
    .pot-note { font-size: 0.9rem; opacity: 0.8; font-style: italic; }
    #master-log .master-entry { background: #e8f5e9; padding: 1rem; margin: 1rem 0; border-left: 5px solid #4caf50; border-radius: 8px; }
    footer { text-align: center; margin-top: 4rem; opacity: 0.6; font-size: 0.9rem; }
  </style>
</head>
<body>
<!--  <div style="background: rgba(255,255,255,0.75); min-height:100vh; padding:1rem;"> -->

  <h1>ðŸŒ± Kellyâ€™s Florida Garden</h1>
  <p style="text-align:center; font-size:1.2rem;">20 pots, one JSON to rule them all, zero copy-paste suffering</p>

  <h2 style="text-align:center; margin-top:3rem;">My Leafy Children</h2>
  <div id="pot-grid" class="pot-grid">Loading your darlingsâ€¦</div>

  <h2 style="text-align:center; margin-top:4rem;">ðŸ“œ Recent Garden Adventures</h2>
  <div id="master-log"></div>

  <footer>Last tended with love on <span id="last-updated">â€¦</span></footer>

  <!-- REPLACE WITH THESE (correct paths) -->
<script src="js/garden.js"></script>
<script src="js/image-list.js"></script>
<script>
 
<script>
    async function buildIndex() {
      const data = await loadGardenData();

      // Update last-updated footer
      document.getElementById('last-updated').textContent = new Date(data.lastUpdated).toLocaleDateString();

      // Build pot grid
      const grid = document.getElementById('pot-grid');
// Build the pot grid â€“ hide truly empty pots, show placeholder for "future" ones

// Build the pot grid with newest-photo thumbnails
const potEntries = Object.entries(data.pots)
  .sort(([a], [b]) => a.localeCompare(b));

const html = potEntries.map(([id, p]) => {
  const hasContent = p.name && p.name.trim() && p.name !== "Empty" && p.name !== "Empty / Flex";
  const isFuture = p.notes?.includes("future") || p.name.toLowerCase().includes("empty");
  
  if (!hasContent && !isFuture) return ''; // hide truly empty pots

  // Find newest photo for this pot
  const myImages = window.GARDEN_IMAGE_LIST
    ?.filter(f => f.startsWith(`pot${id.replace('pot','').padStart(2,'0')}_`))
    .sort()
    .reverse(); // newest first
  
  const latestPhoto = myImages?.[0] ? `assets/images/pots/${myImages[0]}` : null;

  return `
    <div class="pot-card ${isFuture ? 'coming-soon' : ''}">
      <a href="pot.html?id=${id}">
        ${latestPhoto ? `
          <div class="pot-thumb">
            <img src="${latestPhoto}" alt="${p.name || id}" loading="lazy">
          </div>
        ` : isFuture ? `
          <div style="height:160px; display:flex; align-items:center; justify-content:center;">
            <div style="font-size:5rem; opacity:0.2;">ðŸŒ±</div>
          </div>
        ` : ''}
        
        ${isFuture ? `
          <div style="padding:1rem; text-align:center; color:#777;">
            <div style="font-size:1.3rem;">${p.name || 'Coming Soon'}</div>
            <div style="font-size:0.9rem; opacity:0.7; margin-top:0.5rem;">
              ${p.notes?.match(/future[:\s]*(.*)/i)?.[1] || 'Plant baby arriving soon!'}
            </div>
          </div>
        ` : `
          <div class="pot-name">${p.name || id}</div>
          ${p.notes ? `<div class="pot-note">${p.notes}</div>` : ''}
          <div style="margin-top:0.5rem; opacity:0.5; font-size:0.8rem;">${id}</div>
        `}
      </a>
    </div>`;
}).join('');
      grid.innerHTML = html || '<p>No pots yetâ€¦ time to adopt some plant babies!</p>';

      // Render the master activity log (reuse the function we already have)
      renderMasterLog();
    }

    document.addEventListener('DOMContentLoaded', buildIndex);
  </script>
  </div>
</body>
</html>
